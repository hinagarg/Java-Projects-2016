/**
 * 
 */
package com.training.controllers;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.annotation.Import;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.servlet.ModelAndView;

import com.training.daos.CustomerDao;
import com.training.domains.Food;
import com.training.entity.Customer;

/**
 * @author hgarg1
 *
 */
@Controller
@RequestMapping("/addCustomer")
@Import(Customer.class)
public class CustomerController {
  
  @Autowired
  public ModelAndView mdlView;
  
  @Autowired
  private Customer customer;
  
  @Autowired
  private CustomerDao customerDao;
  
  @RequestMapping(method = RequestMethod.GET)
  public ModelAndView initForm(){
  
  mdlView.setViewName("AddCustomer");
  
  mdlView.addObject("command", customer);
  
  return mdlView;
  }
  
  @RequestMapping(method = RequestMethod.POST)
  public String onSubmit(@ModelAttribute("customerAdded") Customer customer, Model mdl)
  {
  
    int rowAdded = customerDao.add(customer);
    mdl.addAttribute("rowAdded",rowAdded);
    return "Show";
  }
  
  public String findCustomer(long key)
  {
  
    Customer foundCustomer = customerDao.find(key);
    
    return "ShowCustomer";
  }
}
